<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Constant+Contact+Ruby+SDK+for+AppConnect">Constant Contact Ruby SDK for AppConnect</h1>

<p>The Ruby SDK for AppConnect allows you to leverage the AppConnect v2 APIs.</p>

<p><a href="https://travis-ci.org/constantcontact/ruby-sdk"><img
src="https://travis-ci.org/constantcontact/ruby-sdk.png"></a></p>

<h1 id="label-Requirements">Requirements</h1>

<p>The Constant Contact Ruby SDK requires Ruby 2.2+.</p>

<h1 id="label-Installation">Installation</h1>

<p>Via bundler: <code>ruby gem &#39;constantcontact&#39;, &#39;~&gt;
4.0.0&#39; </code> Otherwise: <code>bash [sudo|rvm] gem install
constantcontact </code></p>

<h1 id="label-Configuration">Configuration</h1>

<p>The AppConnect SDK can be configured with some options globally or they can
be specified when creating the API client: <code>ruby
ConstantContact::Util::Config.configure do |config|  
config[:auth][:api_key] = &#39;your-access-key&#39;  
config[:auth][:api_secret] = &#39;your-access-secret&#39;  
config[:auth][:redirect_uri] =
&#39;https://example.com/auth/constantcontact&#39; end </code></p>

<h1 id="label-Documentation">Documentation</h1>

<p>SDK Documentation is hosted at <a
href="http://constantcontact.github.io/ruby-sdk">constantcontact.github.io/ruby-sdk</a></p>

<p>API Documentation is located at <a
href="http://developer.constantcontact.com/docs/developer-guides/api-documentation-index.html">developer.constantcontact.com/docs/developer-guides/api-documentation-index.html</a></p>

<h1 id="label-Getting+Started">Getting Started</h1>

<p>AppConnect requires an OAuth access token which will give your app access
to Constant Contact data and services for the accout that granted that
access token.</p>

<h1 id="label-Rails">Rails</h1>

<p>Create a new controller action. The redirect_url should be the same as the
one given when registering the app with Mashery. Use the following code
snippet to get an access token: “`ruby @oauth =
ConstantContact::Auth::OAuth2.new(  :api_key =&gt; &#39;your api key&#39;, 
:api_secret =&gt; &#39;your secret key&#39;,  :redirect_url =&gt; &#39;your
redirect url&#39; # the URL given when registering your app with Mashery. )</p>

<p>@error = <a href=":error">params</a> @user = <a href=":username">params</a>
@code = <a href=":code">params</a></p>

<p>if @code.present?  response = @oauth.get_access_token(@code)  if
response.present?  token = <a href="'access_token'">response</a>  cc =
ConstantContact::Api.new(&#39;your api key&#39;, token)  @contacts =
cc.get_contacts()  end else  # if not code param is provided redirect into
the OAuth flow  redirect_to @oauth.get_authorization_url and return end “`</p>

<p>Create a view for the above mentioned action with the following code: “`erb</p>

<p>&lt;% if @error %&gt;  &lt;p&gt;&lt;%= @error %&gt;&lt;/p&gt; &lt;% end
%&gt;</p>

<p>&lt;% if @contacts.present? %&gt;  &lt;% @contacts.results.each do
|contact| %&gt;  &lt;p&gt;Contact name: &lt;%= “#contactcontact.first_name
#contactcontact.last_name” %&gt;&lt;/p&gt;  &lt;% end %&gt; &lt;% end %&gt; “`</p>

<p>The first time you access the action you will be redirected into the
Constant Contact OAuth flow. Then you will be redirected back to your
action and you should see the list of contacts.</p>

<h1 id="label-Sinatra">Sinatra</h1>

<p>Require AppConnect: <code>ruby require &#39;constantcontact&#39; </code></p>

<p>Add the following route. The redirect_url should be the same given when
registering the app with Mashery. “`ruby get &#39;/my_url&#39; do  @oauth =
ConstantContact::Auth::OAuth2.new(  :api_key =&gt; &#39;your api key&#39;, 
:api_secret =&gt; &#39;your secret key&#39;,  :redirect_url =&gt; &#39;your
redirect url&#39;  )</p>

<p>@error = <a href=":error">params</a>  @user = <a
href=":username">params</a>  @code = <a href=":code">params</a></p>

<p>if @code  response = @oauth.get_access_token(@code)  if response  token =
<a href="'access_token'">response</a>  cc =
ConstantContact::Api.new(&#39;your api key&#39;, token)  @contacts =
cc.get_contacts()  end  end</p>

<p>erb :my_view end “`</p>

<p>Create a my_view.erb with the following code: “`ruby &lt;% if @error %&gt; 
&lt;p&gt;&lt;%=@error%&gt;&lt;/p&gt; &lt;% end %&gt;</p>

<p>&lt;% if @code %&gt;  &lt;% if @contacts %&gt;  &lt;%
@contacts.results.each do |contact| %&gt;  &lt;p&gt;Contact name: &lt;%=
“#contactcontact.first_name #contactcontact.last_name” %&gt;&lt;/p&gt;  &lt;% end
%&gt;  &lt;% end %&gt; &lt;% else %&gt;  &lt;a
href=“&lt;%=@oauth.get_authorization_url%&gt;”&gt;Click to
authorize&lt;/a&gt; &lt;% end %&gt; “`</p>

<p>The first time you access the action in browser you should see the “Click
to authorize” link. Follow the link, go through all the Constant Contact
steps required and then you will be redirected back to your action and you
should see the list of contacts.</p>

<h1 id="label-Example">Example</h1>

<p>Add a new contact using the Ruby SDK “`</p>

<h1 id="label-gem+install+constantcontact">gem install constantcontact</h1>

<p>require &#39;yaml&#39; require &#39;constantcontact&#39;</p>

<p>class ContactExample</p>

<p>def initialize()  cnf = YAML::load(File.open(&#39;config/config.yml&#39;)) 
@cc = <a href="'api_key'">ConstantContact::Api.new(cnf</a>, <a
href="'oauth_token'">cnf</a>)  end</p>

<p>def add_contact( contact_json )  @cc.add_contact( contact_json )  end</p>

<p>def get_lists  @cc.get_lists()  end</p>

<p>end class AddContactTest  def do()  contact_example = ContactExample.new 
contact_list = <a href="0">contact_example.get_lists</a>.id  puts “Add what
email address?”  email_address = gets.chomp  puts “Adding #email_address
to Contact List #contact_list”</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_list_to_add_to'>list_to_add_to</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ConstantContact.html" title="ConstantContact (module)">ConstantContact</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConstantContact/Components.html" title="ConstantContact::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConstantContact/Components/ContactList.html" title="ConstantContact::Components::ContactList (class)">ContactList</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_list_to_add_to'>list_to_add_to</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_contact_list'>contact_list</span>

<span class='id identifier rubyid_new_contact'>new_contact</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ConstantContact.html" title="ConstantContact (module)">ConstantContact</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConstantContact/Components.html" title="ConstantContact::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConstantContact/Components/Contact.html" title="ConstantContact::Components::Contact (class)">Contact</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_new_contact'>new_contact</span><span class='period'>.</span><span class='id identifier rubyid_add_email'>add_email</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="ConstantContact.html" title="ConstantContact (module)">ConstantContact</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConstantContact/Components.html" title="ConstantContact::Components (module)">Components</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ConstantContact/Components/EmailAddress.html" title="ConstantContact::Components::EmailAddress (class)">EmailAddress</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ConstantContact/Components/EmailAddress.html#initialize-instance_method" title="ConstantContact::Components::EmailAddress#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_email_address'>email_address</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_new_contact'>new_contact</span><span class='period'>.</span><span class='id identifier rubyid_add_list'>add_list</span><span class='lparen'>(</span><span class='id identifier rubyid_list_to_add_to'>list_to_add_to</span><span class='rparen'>)</span>
<span class='id identifier rubyid_new_contact'>new_contact</span><span class='period'>.</span><span class='id identifier rubyid_first_name'>first_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Example</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_new_contact'>new_contact</span><span class='period'>.</span><span class='id identifier rubyid_last_name'>last_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>User</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'>#input = &quot;{ &#39;email_addresses&#39;:[{&#39;email_address&#39;:&#39;#{email_address}&#39;}], &#39;lists&#39;:[{&#39;id&#39;:&#39;#{contact_list}&#39;}], first_name&#39;:&#39;Example&#39;, &#39;last_name&#39;:&#39;User&#39;}&quot;
</span><span class='comment'>#puts input
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_new_contact'>new_contact</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_contact_example'>contact_example</span><span class='period'>.</span><span class='id identifier rubyid_add_contact'>add_contact</span><span class='lparen'>(</span> <span class='id identifier rubyid_new_contact'>new_contact</span> <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>
</code></pre>

<p>rescue RestClient::BadRequest =&gt; e  puts “#ee.http_code -
#ee.http_body”  end end AddContactTest.new.do “`</p>
</div></div>

      <div id="footer">
  Generated on Tue Aug 15 01:57:59 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.2.6).
</div>

    </div>
  </body>
</html>